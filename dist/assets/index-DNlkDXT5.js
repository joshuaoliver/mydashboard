import{e as S,r as n,h as m,d as i,c as E,j as e,C as h,i as g,k as p,l as u,f as j,L as N}from"./index-BiTP6UeF.js";import{B as f}from"./button-RNOw0Kg4.js";import{u as I}from"./useSuspenseQuery-BI5dw9cZ.js";import{U as L}from"./users-D4c1pni6.js";import{C}from"./circle-alert-c2HjJ2Ls.js";import{R as U}from"./refresh-cw-aD6uxtSl.js";import{T as w}from"./trash-2-Cg89AqxP.js";import{S as F}from"./settings-wuATwRYX.js";import{B as _}from"./bot-BftdJFto.js";import{M as P}from"./message-square-xWUg4nPR.js";import{M as Q}from"./map-pin-BBpS-tgj.js";import"./index-eoGaCaxS.js";const z=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],M=S("circle-check-big",z);const V=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],q=S("database",V);function ae(){const[b,r]=n.useState(!1),[a,t]=n.useState(null),[o,y]=n.useState(!1),[l,d]=n.useState(null),k=m(i.cleanupMessages.clearAllMessages),D=m(i.cleanupMessages.clearAllChats),$=m(i.dexAdmin.triggerManualSync),{data:v}=I(E(i.dexQueries.getSyncStats,{})),A=async()=>{if(confirm("Delete all cached messages?")){r(!0),t(null);try{const s=await k();t({type:"success",message:`Deleted ${s.deleted} messages.`})}catch(s){t({type:"error",message:`Failed: ${s instanceof Error?s.message:"Unknown"}`})}finally{r(!1)}}},R=async()=>{if(confirm("Delete all cached chats AND messages?")){r(!0),t(null);try{const s=await D();t({type:"success",message:`Deleted ${s.deleted} chats.`})}catch(s){t({type:"error",message:`Failed: ${s instanceof Error?s.message:"Unknown"}`})}finally{r(!1)}}},T=async()=>{y(!0),d(null);try{await $(),d({type:"success",message:"Dex sync started!"})}catch(s){d({type:"error",message:`Failed: ${s instanceof Error?s.message:"Unknown"}`})}finally{y(!1)}},B=s=>{if(!s)return"Never";const c=Math.floor((Date.now()-s)/6e4);if(c<1)return"Just now";if(c<60)return`${c} min ago`;const x=Math.floor(c/60);return x<24?`${x} hours ago`:`${Math.floor(x/24)} days ago`};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-100",children:"Settings"}),e.jsx("p",{className:"text-slate-400 mt-1",children:"Manage your dashboard configuration and integrations"})]}),e.jsxs("div",{className:"space-y-6 max-w-4xl",children:[e.jsxs(h,{className:"bg-slate-800/50 border-slate-700",children:[e.jsxs(g,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5 text-purple-400"}),e.jsx(p,{className:"text-slate-100",children:"Dex Contacts Sync"})]}),e.jsx(u,{className:"text-slate-400",children:"Automatic sync with Dex CRM"})]}),e.jsxs(j,{className:"space-y-4",children:[l&&e.jsxs("div",{className:`rounded-lg p-4 flex items-start gap-3 border ${l.type==="success"?"bg-green-900/20 border-green-700":"bg-red-900/20 border-red-700"}`,children:[l.type==="success"?e.jsx(M,{className:"w-5 h-5 text-green-400"}):e.jsx(C,{className:"w-5 h-5 text-red-400"}),e.jsx("p",{className:`text-sm ${l.type==="success"?"text-green-300":"text-red-300"}`,children:l.message})]}),e.jsxs("div",{className:"bg-slate-900/50 border border-slate-700 rounded-lg p-4 grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-400",children:"Total Contacts"}),e.jsx("p",{className:"text-2xl font-bold text-slate-100",children:v.totalContacts})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-400",children:"Last Synced"}),e.jsx("p",{className:"text-lg font-semibold text-slate-100",children:B(v.lastSyncTime)})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs(f,{onClick:T,disabled:o,variant:"outline",className:"gap-2 bg-slate-800 border-slate-600 text-slate-300 hover:bg-slate-700 hover:text-slate-100",children:[e.jsx(U,{className:`w-4 h-4 ${o?"animate-spin":""}`}),o?"Syncing...":"Sync Now"]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-300",children:"Manual Sync"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Trigger immediate sync from Dex"})]})]})]})]}),e.jsxs(h,{className:"bg-slate-800/50 border-slate-700",children:[e.jsxs(g,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"w-5 h-5 text-blue-400"}),e.jsx(p,{className:"text-slate-100",children:"Beeper Cache"})]}),e.jsx(u,{className:"text-slate-400",children:"Manage cached messages and chats"})]}),e.jsxs(j,{className:"space-y-4",children:[a&&e.jsxs("div",{className:`rounded-lg p-4 flex items-start gap-3 border ${a.type==="success"?"bg-green-900/20 border-green-700":"bg-red-900/20 border-red-700"}`,children:[a.type==="success"?e.jsx(M,{className:"w-5 h-5 text-green-400"}):e.jsx(C,{className:"w-5 h-5 text-red-400"}),e.jsx("p",{className:`text-sm ${a.type==="success"?"text-green-300":"text-red-300"}`,children:a.message})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs(f,{onClick:A,disabled:b,variant:"outline",className:"gap-2 bg-slate-800 border-slate-600 text-slate-300 hover:bg-slate-700 hover:text-slate-100",children:[e.jsx(w,{className:"w-4 h-4"}),"Clear Messages"]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-300",children:"Clear Messages Only"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Chats remain intact"})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs(f,{onClick:R,disabled:b,variant:"outline",className:"gap-2 bg-slate-800 border-slate-600 text-slate-300 hover:bg-slate-700 hover:text-slate-100",children:[e.jsx(w,{className:"w-4 h-4"}),"Clear All"]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-300",children:"Full Cache Reset"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Delete everything and resync"})]})]})]})]}),e.jsxs(h,{className:"bg-slate-800/50 border-slate-700",children:[e.jsxs(g,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5 text-purple-400"}),e.jsx(p,{className:"text-slate-100",children:"Configuration"})]}),e.jsx(u,{className:"text-slate-400",children:"Manage AI models, prompts, and other settings"})]}),e.jsxs(j,{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(N,{to:"/settings/ai",className:"flex items-center gap-3 p-4 rounded-lg bg-slate-900/50 border border-slate-700 hover:border-blue-500/50 hover:bg-slate-800/50 transition-all group",children:[e.jsx(_,{className:"h-5 w-5 text-blue-400 group-hover:text-blue-300"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-200 group-hover:text-slate-100",children:"AI Models"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Configure which models to use"})]})]}),e.jsxs(N,{to:"/settings/prompts",className:"flex items-center gap-3 p-4 rounded-lg bg-slate-900/50 border border-slate-700 hover:border-purple-500/50 hover:bg-slate-800/50 transition-all group",children:[e.jsx(P,{className:"h-5 w-5 text-purple-400 group-hover:text-purple-300"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-200 group-hover:text-slate-100",children:"AI Prompts"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Edit prompt templates"})]})]}),e.jsxs(N,{to:"/settings/locations",className:"flex items-center gap-3 p-4 rounded-lg bg-slate-900/50 border border-slate-700 hover:border-green-500/50 hover:bg-slate-800/50 transition-all group",children:[e.jsx(Q,{className:"h-5 w-5 text-green-400 group-hover:text-green-300"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-200 group-hover:text-slate-100",children:"Locations"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Manage location tags"})]})]})]})]})]})]})}export{ae as component};
