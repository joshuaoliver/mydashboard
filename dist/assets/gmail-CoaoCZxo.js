import{e as k,c as h,d as j,b as p,j as e,L as N,C as l,f as b,i,l as n,k as c}from"./index-BiTP6UeF.js";import{u as L}from"./useSuspenseQuery-BI5dw9cZ.js";import{B as y}from"./button-RNOw0Kg4.js";import{T as D,a as G,b as f,c as x,d as P,e as d}from"./table-B2lTRSLB.js";import{A as S}from"./arrow-left-D4PirhN6.js";import{M as v}from"./mail-Djp8AAiC.js";import{I as H,T as B}from"./trending-up-C2rPS_46.js";import{S as w}from"./settings-wuATwRYX.js";import"./index-eoGaCaxS.js";const M=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],U=k("trending-down",M);function K(){const{data:o}=L(h(j.settingsStore.getGmailSettings,{})),{data:t}=p({...h(j.gmailSync.getLatestSnapshot,{}),enabled:!!o?.isConfigured}),{data:r}=p({...h(j.gmailSync.getDailySummary,{days:30}),enabled:!!o?.isConfigured}),{data:a}=p({...h(j.gmailSync.getSnapshots,{limit:20}),enabled:!!o?.isConfigured}),{data:g}=p({...h(j.gmailSync.getStats,{}),enabled:!!o?.isConfigured}),C=o?.isConfigured??!1,m=a&&a.length>1?t.totalInbox-a[a.length-1].totalInbox:0;return C?e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(N,{to:"/stats",className:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(S,{className:"w-4 h-4 mr-1"}),"Back to Stats"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(v,{className:"w-8 h-8 text-red-500"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gmail Stats"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Historical inbox tracking"})]})]}),e.jsx(N,{to:"/settings/gmail",children:e.jsxs(y,{variant:"outline",size:"sm",children:[e.jsx(w,{className:"w-4 h-4 mr-2"}),"Settings"]})})]})]}),t&&e.jsxs("div",{className:"grid gap-4 md:grid-cols-4 mb-6",children:[e.jsx(l,{children:e.jsxs(i,{className:"pb-2",children:[e.jsx(n,{children:"Total Inbox"}),e.jsxs(c,{className:"text-3xl flex items-center gap-2",children:[t.totalInbox,m!==0&&e.jsxs("span",{className:`text-sm font-normal flex items-center ${m>0?"text-red-500":"text-green-500"}`,children:[m>0?e.jsx(B,{className:"w-4 h-4 mr-1"}):e.jsx(U,{className:"w-4 h-4 mr-1"}),m>0?"+":"",m]})]})]})}),e.jsx(l,{children:e.jsxs(i,{className:"pb-2",children:[e.jsx(n,{children:"Unread"}),e.jsx(c,{className:"text-3xl text-red-600",children:t.unread})]})}),e.jsx(l,{children:e.jsxs(i,{className:"pb-2",children:[e.jsx(n,{children:"Primary"}),e.jsx(c,{className:"text-3xl",children:t.primary??"-"})]})}),e.jsx(l,{children:e.jsxs(i,{className:"pb-2",children:[e.jsx(n,{children:"Promotions"}),e.jsx(c,{className:"text-3xl text-gray-500",children:t.promotions??"-"})]})})]}),t&&e.jsxs(l,{className:"mb-6",children:[e.jsxs(i,{children:[e.jsx(c,{children:"Categories"}),e.jsx(n,{children:"Email distribution by category"})]}),e.jsx(b,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-600",children:"Primary"}),e.jsx("p",{className:"text-2xl font-bold text-blue-800",children:t.primary??0})]}),e.jsxs("div",{className:"p-3 bg-purple-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-purple-600",children:"Social"}),e.jsx("p",{className:"text-2xl font-bold text-purple-800",children:t.social??0})]}),e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-green-600",children:"Promotions"}),e.jsx("p",{className:"text-2xl font-bold text-green-800",children:t.promotions??0})]}),e.jsxs("div",{className:"p-3 bg-yellow-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-yellow-600",children:"Updates"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-800",children:t.updates??0})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Forums"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:t.forums??0})]})]})})]}),r&&r.length>0&&e.jsxs(l,{className:"mb-6",children:[e.jsxs(i,{children:[e.jsx(c,{children:"Daily History (Last 30 Days)"}),e.jsx(n,{children:"End-of-day inbox counts"})]}),e.jsxs(b,{children:[e.jsx("div",{className:"h-64 flex items-end justify-between gap-1",children:r.map((s,$)=>{const u=Math.max(...r.map(I=>I.totalInbox)),T=u>0?s.totalInbox/u*100:0;return e.jsx("div",{className:"flex-1 bg-red-200 hover:bg-red-300 transition-colors rounded-t cursor-pointer group relative",style:{height:`${T}%`,minHeight:"4px"},title:`${s.date}: ${s.totalInbox} emails`,children:e.jsxs("div",{className:"absolute bottom-full mb-1 left-1/2 -translate-x-1/2 hidden group-hover:block bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:[s.date,": ",s.totalInbox]})},s.date)})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-2",children:[e.jsx("span",{children:r[0]?.date}),e.jsx("span",{children:r[r.length-1]?.date})]})]})]}),a&&a.length>0&&e.jsxs(l,{children:[e.jsxs(i,{children:[e.jsx(c,{children:"Recent Snapshots"}),e.jsxs(n,{children:["Last ",a.length," data points"]})]}),e.jsx(b,{children:e.jsxs(D,{children:[e.jsx(G,{children:e.jsxs(f,{children:[e.jsx(x,{children:"Timestamp"}),e.jsx(x,{className:"text-right",children:"Total"}),e.jsx(x,{className:"text-right",children:"Unread"}),e.jsx(x,{className:"text-right",children:"Primary"}),e.jsx(x,{className:"text-right",children:"Social"}),e.jsx(x,{className:"text-right",children:"Promotions"})]})}),e.jsx(P,{children:a.map(s=>e.jsxs(f,{children:[e.jsx(d,{children:new Date(s.timestamp).toLocaleString()}),e.jsx(d,{className:"text-right font-medium",children:s.totalInbox}),e.jsx(d,{className:"text-right text-red-600",children:s.unread}),e.jsx(d,{className:"text-right",children:s.primary??"-"}),e.jsx(d,{className:"text-right",children:s.social??"-"}),e.jsx(d,{className:"text-right",children:s.promotions??"-"})]},s._id))})]})})]}),g&&e.jsx("div",{className:"mt-6 text-sm text-gray-500",children:e.jsxs("p",{children:["Tracking since"," ",g.oldestSnapshot?new Date(g.oldestSnapshot).toLocaleDateString():"N/A"," ","â€¢ ",g.totalSnapshots," snapshots recorded"]})})]}):e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(N,{to:"/stats",className:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(S,{className:"w-4 h-4 mr-1"}),"Back to Stats"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(v,{className:"w-8 h-8 text-red-500"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gmail Stats"})]})]}),e.jsx(l,{children:e.jsxs(b,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(H,{className:"w-12 h-12 text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"Gmail is not connected"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Set up Gmail integration to start tracking your inbox"}),e.jsx(N,{to:"/settings/gmail",children:e.jsxs(y,{children:[e.jsx(w,{className:"w-4 h-4 mr-2"}),"Configure Gmail"]})})]})})]})}export{K as component};
