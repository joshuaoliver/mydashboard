import{e as H,c as d,d as x,b as m,j as e,L as u,C as a,f as b,i as l,l as h,k as n}from"./index-BiTP6UeF.js";import{u as B}from"./useSuspenseQuery-BI5dw9cZ.js";import{B as S}from"./button-RNOw0Kg4.js";import{B as D}from"./badge-Djmg-4jD.js";import{T as $,a as A,b as w,c as j,d as E,e as f}from"./table-B2lTRSLB.js";import{A as k}from"./arrow-left-D4PirhN6.js";import{C as p}from"./clock-GT_BKR4R.js";import{S as C}from"./settings-wuATwRYX.js";import{C as L}from"./calendar-CD4s7doh.js";import"./index-eoGaCaxS.js";const F=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],P=H("briefcase",F);function J(){const{data:r}=B(d(x.settingsStore.getHubstaffSettings,{})),{data:c}=m({...d(x.hubstaffSync.getTodayStats,{}),enabled:!!r?.isConfigured}),{data:y}=m({...d(x.hubstaffSync.getWeekStats,{}),enabled:!!r?.isConfigured}),{data:i}=m({...d(x.hubstaffSync.getDailySummaries,{days:30}),enabled:!!r?.isConfigured}),{data:g}=m({...d(x.hubstaffSync.getTimeEntries,{limit:20}),enabled:!!r?.isConfigured}),{data:o}=m({...d(x.hubstaffSync.getStats,{}),enabled:!!r?.isConfigured});if(!(r?.isConfigured??!1))return e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(u,{to:"/stats",className:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(k,{className:"w-4 h-4 mr-1"}),"Back to Stats"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(p,{className:"w-8 h-8 text-green-500"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Hubstaff Stats"})]})]}),e.jsx(a,{children:e.jsxs(b,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(p,{className:"w-12 h-12 text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"Hubstaff is not connected"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Set up Hubstaff integration to start tracking your time"}),e.jsx(u,{to:"/settings/hubstaff",children:e.jsxs(S,{children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Configure Hubstaff"]})})]})})]});const v=s=>{const t=Math.floor(s/3600),N=Math.floor(s%3600/60);return`${t}h ${N}m`};return e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(u,{to:"/stats",className:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(k,{className:"w-4 h-4 mr-1"}),"Back to Stats"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(p,{className:"w-8 h-8 text-green-500"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Hubstaff Stats"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r?.selectedUserName||"Time tracking data"})]})]}),e.jsx(u,{to:"/settings/hubstaff",children:e.jsxs(S,{variant:"outline",size:"sm",children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Settings"]})})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4 mb-6",children:[e.jsx(a,{children:e.jsxs(l,{className:"pb-2",children:[e.jsx(h,{children:"Today"}),e.jsxs(n,{className:"text-3xl text-green-600",children:[c?.totalHours?.toFixed(1)??"0","h"]})]})}),e.jsx(a,{children:e.jsxs(l,{className:"pb-2",children:[e.jsx(h,{children:"This Week"}),e.jsxs(n,{className:"text-3xl",children:[y?.totalHours?.toFixed(1)??"0","h"]})]})}),e.jsx(a,{children:e.jsxs(l,{className:"pb-2",children:[e.jsx(h,{children:"Days Tracked"}),e.jsx(n,{className:"text-3xl",children:y?.daysTracked??0})]})}),e.jsx(a,{children:e.jsxs(l,{className:"pb-2",children:[e.jsx(h,{children:"All Time"}),e.jsxs(n,{className:"text-3xl text-gray-600",children:[o?.totalHoursAllTime?.toFixed(0)??"0","h"]})]})})]}),c?.projectBreakdown&&c.projectBreakdown.length>0&&e.jsxs(a,{className:"mb-6",children:[e.jsx(l,{children:e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5"}),"Today's Breakdown"]})}),e.jsx(b,{children:e.jsx("div",{className:"space-y-3",children:c.projectBreakdown.map(s=>{const t=c.totalSeconds>0?s.seconds/c.totalSeconds*100:0;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:s.projectName}),e.jsx("span",{className:"text-sm text-gray-500",children:v(s.seconds)})]}),e.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-green-500 rounded-full",style:{width:`${t}%`}})})]},s.projectId)})})})]}),i&&i.length>0&&e.jsxs(a,{className:"mb-6",children:[e.jsx(l,{children:e.jsx(n,{children:"Daily Hours (Last 30 Days)"})}),e.jsxs(b,{children:[e.jsx("div",{className:"h-48 flex items-end justify-between gap-1",children:i.sort((s,t)=>s.date.localeCompare(t.date)).map(s=>{const t=Math.max(...i.map(T=>T.totalHours)),N=t>0?s.totalHours/t*100:0;return e.jsx("div",{className:"flex-1 bg-green-200 hover:bg-green-300 transition-colors rounded-t cursor-pointer group relative",style:{height:`${N}%`,minHeight:s.totalHours>0?"4px":"0"},title:`${s.date}: ${s.totalHours.toFixed(1)}h`,children:e.jsxs("div",{className:"absolute bottom-full mb-1 left-1/2 -translate-x-1/2 hidden group-hover:block bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10",children:[s.date,": ",s.totalHours.toFixed(1),"h"]})},s.date)})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-2",children:[e.jsx("span",{children:i[0]?.date}),e.jsx("span",{children:i[i.length-1]?.date})]})]})]}),g&&g.length>0&&e.jsxs(a,{children:[e.jsxs(l,{children:[e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-5 h-5"}),"Recent Time Entries"]}),e.jsxs(h,{children:["Last ",g.length," entries"]})]}),e.jsx(b,{children:e.jsxs($,{children:[e.jsx(A,{children:e.jsxs(w,{children:[e.jsx(j,{children:"Date"}),e.jsx(j,{children:"Project"}),e.jsx(j,{children:"Task"}),e.jsx(j,{className:"text-right",children:"Duration"}),e.jsx(j,{className:"text-right",children:"Activity"})]})}),e.jsx(E,{children:g.map(s=>e.jsxs(w,{children:[e.jsx(f,{children:s.date}),e.jsx(f,{children:e.jsx(D,{variant:"outline",children:s.hubstaffProjectName})}),e.jsx(f,{className:"text-gray-600",children:s.taskName||"-"}),e.jsx(f,{className:"text-right font-medium",children:v(s.trackedSeconds)}),e.jsx(f,{className:"text-right",children:s.activityPercent?`${s.activityPercent}%`:"-"})]},s._id))})]})})]}),o&&e.jsx("div",{className:"mt-6 text-sm text-gray-500",children:e.jsxs("p",{children:["Tracking since ",o.oldestEntry||"N/A"," • ",o.totalEntries," entries •"," ",o.totalDays," days"]})})]})}export{J as component};
