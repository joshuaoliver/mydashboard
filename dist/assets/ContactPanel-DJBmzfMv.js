import{e as Ae,r as a,j as t,s as Q,v as rt,w as xe,P as nt,g as ae,h as M,d as E,D as ke,M as Xt,N as Zt,S as Jt,T as ve}from"./index-BiTP6UeF.js";import{B as _}from"./button-RNOw0Kg4.js";import{T as Ee,S as Ie}from"./textarea-YkGIn2mW.js";import{L as G}from"./label-BUooFWRZ.js";import{S as Yt}from"./switch-BrP0SaIw.js";import{B as be}from"./badge-Djmg-4jD.js";import{I as er}from"./input-C8zM_rjF.js";import{u as tr,a as q,P as rr,h as nr,R as ar,b as sr,F as or,D as lr}from"./Combination-DgyOTBSr.js";import{c as at,R as ir,A as st,C as cr,b as dr}from"./index-BcrQaILI.js";import{R as ur,P as mr,O as fr,C as pr,X as Ve}from"./index-DDYpCHIR.js";import{S as xr}from"./search-BcZJC1hW.js";import{D as hr,e as gr,f as vr,i as br}from"./sheet-Bifj_UwF.js";import{D as yr,b as jr,c as wr,d as Cr,e as Nr,f as Sr}from"./dialog-CkvU02Kn.js";import{C as ot}from"./circle-alert-c2HjJ2Ls.js";import{I as ze}from"./instagram-arD0XV9m.js";import{P as Be}from"./phone-D1osf1s3.js";import{U as Pr}from"./user-iDHg6gyw.js";import{C as He}from"./check-tE-Z_oDg.js";const kr=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Er=Ae("ellipsis-vertical",kr);const Ir=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],Rr=Ae("lock-open",Ir);const Mr=[["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M12 2v10.3a4 4 0 0 1-1.172 2.872L4 22",key:"1hyw0i"}],["path",{d:"m20 22-5-5",key:"1m27yz"}]],_r=Ae("merge",Mr);function Dr(e,n=[]){let r=[];function o(l,d){const m=a.createContext(d),f=r.length;r=[...r,d];const i=g=>{const{scope:x,children:w,...k}=g,D=x?.[e]?.[f]||m,R=a.useMemo(()=>k,Object.values(k));return t.jsx(D.Provider,{value:R,children:w})};i.displayName=l+"Provider";function h(g,x){const w=x?.[e]?.[f]||m,k=a.useContext(w);if(k)return k;if(d!==void 0)return d;throw new Error(`\`${g}\` must be used within \`${l}\``)}return[i,h]}const s=()=>{const l=r.map(d=>a.createContext(d));return function(m){const f=m?.[e]||l;return a.useMemo(()=>({[`__scope${e}`]:{...m,[e]:f}}),[m,f])}};return s.scopeName=e,[o,Or(s,...n)]}function Or(...e){const n=e[0];if(e.length===1)return n;const r=()=>{const o=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(l){const d=o.reduce((m,{useScope:f,scopeName:i})=>{const g=f(l)[`__scope${i}`];return{...m,...g}},{});return a.useMemo(()=>({[`__scope${n.scopeName}`]:d}),[d])}};return r.scopeName=n.scopeName,r}function lt(e){const n=Ar(e),r=a.forwardRef((o,s)=>{const{children:l,...d}=o,m=a.Children.toArray(l),f=m.find(Fr);if(f){const i=f.props.children,h=m.map(g=>g===f?a.Children.count(i)>1?a.Children.only(null):a.isValidElement(i)?i.props.children:null:g);return t.jsx(n,{...d,ref:s,children:a.isValidElement(i)?a.cloneElement(i,void 0,h):null})}return t.jsx(n,{...d,ref:s,children:l})});return r.displayName=`${e}.Slot`,r}function Ar(e){const n=a.forwardRef((r,o)=>{const{children:s,...l}=r;if(a.isValidElement(s)){const d=Lr(s),m=$r(l,s.props);return s.type!==a.Fragment&&(m.ref=o?Q(o,d):d),a.cloneElement(s,m)}return a.Children.count(s)>1?a.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}var Tr=Symbol("radix.slottable");function Fr(e){return a.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Tr}function $r(e,n){const r={...n};for(const o in n){const s=e[o],l=n[o];/^on[A-Z]/.test(o)?s&&l?r[o]=(...m)=>{const f=l(...m);return s(...m),f}:s&&(r[o]=s):o==="style"?r[o]={...s,...l}:o==="className"&&(r[o]=[s,l].filter(Boolean).join(" "))}return{...e,...r}}function Lr(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=n&&"isReactWarning"in n&&n.isReactWarning;return r?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=n&&"isReactWarning"in n&&n.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Vr=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],it=Vr.reduce((e,n)=>{const r=lt(`Primitive.${n}`),o=a.forwardRef((s,l)=>{const{asChild:d,...m}=s,f=d?r:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(f,{...m,ref:l})});return o.displayName=`Primitive.${n}`,{...e,[n]:o}},{}),ye="Popover",[ct]=Dr(ye,[at]),he=at(),[zr,H]=ct(ye),dt=e=>{const{__scopePopover:n,children:r,open:o,defaultOpen:s,onOpenChange:l,modal:d=!1}=e,m=he(n),f=a.useRef(null),[i,h]=a.useState(!1),[g,x]=tr({prop:o,defaultProp:s??!1,onChange:l,caller:ye});return t.jsx(ir,{...m,children:t.jsx(zr,{scope:n,contentId:q(),triggerRef:f,open:g,onOpenChange:x,onOpenToggle:a.useCallback(()=>x(w=>!w),[x]),hasCustomAnchor:i,onCustomAnchorAdd:a.useCallback(()=>h(!0),[]),onCustomAnchorRemove:a.useCallback(()=>h(!1),[]),modal:d,children:r})})};dt.displayName=ye;var ut="PopoverAnchor",Br=a.forwardRef((e,n)=>{const{__scopePopover:r,...o}=e,s=H(ut,r),l=he(r),{onCustomAnchorAdd:d,onCustomAnchorRemove:m}=s;return a.useEffect(()=>(d(),()=>m()),[d,m]),t.jsx(st,{...l,...o,ref:n})});Br.displayName=ut;var mt="PopoverTrigger",ft=a.forwardRef((e,n)=>{const{__scopePopover:r,...o}=e,s=H(mt,r),l=he(r),d=rt(n,s.triggerRef),m=t.jsx(it.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":vt(s.open),...o,ref:d,onClick:xe(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?m:t.jsx(st,{asChild:!0,...l,children:m})});ft.displayName=mt;var Te="PopoverPortal",[Hr,Wr]=ct(Te,{forceMount:void 0}),pt=e=>{const{__scopePopover:n,forceMount:r,children:o,container:s}=e,l=H(Te,n);return t.jsx(Hr,{scope:n,forceMount:r,children:t.jsx(nt,{present:r||l.open,children:t.jsx(rr,{asChild:!0,container:s,children:o})})})};pt.displayName=Te;var ne="PopoverContent",xt=a.forwardRef((e,n)=>{const r=Wr(ne,e.__scopePopover),{forceMount:o=r.forceMount,...s}=e,l=H(ne,e.__scopePopover);return t.jsx(nt,{present:o||l.open,children:l.modal?t.jsx(Kr,{...s,ref:n}):t.jsx(Gr,{...s,ref:n})})});xt.displayName=ne;var Ur=lt("PopoverContent.RemoveScroll"),Kr=a.forwardRef((e,n)=>{const r=H(ne,e.__scopePopover),o=a.useRef(null),s=rt(n,o),l=a.useRef(!1);return a.useEffect(()=>{const d=o.current;if(d)return nr(d)},[]),t.jsx(ar,{as:Ur,allowPinchZoom:!0,children:t.jsx(ht,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:xe(e.onCloseAutoFocus,d=>{d.preventDefault(),l.current||r.triggerRef.current?.focus()}),onPointerDownOutside:xe(e.onPointerDownOutside,d=>{const m=d.detail.originalEvent,f=m.button===0&&m.ctrlKey===!0,i=m.button===2||f;l.current=i},{checkForDefaultPrevented:!1}),onFocusOutside:xe(e.onFocusOutside,d=>d.preventDefault(),{checkForDefaultPrevented:!1})})})}),Gr=a.forwardRef((e,n)=>{const r=H(ne,e.__scopePopover),o=a.useRef(!1),s=a.useRef(!1);return t.jsx(ht,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{e.onCloseAutoFocus?.(l),l.defaultPrevented||(o.current||r.triggerRef.current?.focus(),l.preventDefault()),o.current=!1,s.current=!1},onInteractOutside:l=>{e.onInteractOutside?.(l),l.defaultPrevented||(o.current=!0,l.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const d=l.target;r.triggerRef.current?.contains(d)&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&s.current&&l.preventDefault()}})}),ht=a.forwardRef((e,n)=>{const{__scopePopover:r,trapFocus:o,onOpenAutoFocus:s,onCloseAutoFocus:l,disableOutsidePointerEvents:d,onEscapeKeyDown:m,onPointerDownOutside:f,onFocusOutside:i,onInteractOutside:h,...g}=e,x=H(ne,r),w=he(r);return sr(),t.jsx(or,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:s,onUnmountAutoFocus:l,children:t.jsx(lr,{asChild:!0,disableOutsidePointerEvents:d,onInteractOutside:h,onEscapeKeyDown:m,onPointerDownOutside:f,onFocusOutside:i,onDismiss:()=>x.onOpenChange(!1),children:t.jsx(cr,{"data-state":vt(x.open),role:"dialog",id:x.contentId,...w,...g,ref:n,style:{...g.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),gt="PopoverClose",qr=a.forwardRef((e,n)=>{const{__scopePopover:r,...o}=e,s=H(gt,r);return t.jsx(it.button,{type:"button",...o,ref:n,onClick:xe(e.onClick,()=>s.onOpenChange(!1))})});qr.displayName=gt;var Qr="PopoverArrow",Xr=a.forwardRef((e,n)=>{const{__scopePopover:r,...o}=e,s=he(r);return t.jsx(dr,{...s,...o,ref:n})});Xr.displayName=Qr;function vt(e){return e?"open":"closed"}var Zr=dt,Jr=ft,Yr=pt,en=xt;function We({...e}){return t.jsx(Zr,{"data-slot":"popover",...e})}function Ue({...e}){return t.jsx(Jr,{"data-slot":"popover-trigger",...e})}function Ke({className:e,align:n="center",sideOffset:r=4,...o}){return t.jsx(Yr,{children:t.jsx(en,{"data-slot":"popover-content",align:n,sideOffset:r,className:ae("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...o})})}var Ge=1,tn=.9,rn=.8,nn=.17,Re=.1,Me=.999,an=.9999,sn=.99,on=/[\\\/_+.#"@\[\(\{&]/,ln=/[\\\/_+.#"@\[\(\{&]/g,cn=/[\s-]/,bt=/[\s-]/g;function De(e,n,r,o,s,l,d){if(l===n.length)return s===e.length?Ge:sn;var m=`${s},${l}`;if(d[m]!==void 0)return d[m];for(var f=o.charAt(l),i=r.indexOf(f,s),h=0,g,x,w,k;i>=0;)g=De(e,n,r,o,i+1,l+1,d),g>h&&(i===s?g*=Ge:on.test(e.charAt(i-1))?(g*=rn,w=e.slice(s,i-1).match(ln),w&&s>0&&(g*=Math.pow(Me,w.length))):cn.test(e.charAt(i-1))?(g*=tn,k=e.slice(s,i-1).match(bt),k&&s>0&&(g*=Math.pow(Me,k.length))):(g*=nn,s>0&&(g*=Math.pow(Me,i-s))),e.charAt(i)!==n.charAt(l)&&(g*=an)),(g<Re&&r.charAt(i-1)===o.charAt(l+1)||o.charAt(l+1)===o.charAt(l)&&r.charAt(i-1)!==o.charAt(l))&&(x=De(e,n,r,o,i+1,l+2,d),x*Re>g&&(g=x*Re)),g>h&&(h=g),i=r.indexOf(f,i+1);return d[m]=h,h}function qe(e){return e.toLowerCase().replace(bt," ")}function dn(e,n,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,De(e,n,qe(e),qe(n),0,0,{})}function un(e){const n=mn(e),r=a.forwardRef((o,s)=>{const{children:l,...d}=o,m=a.Children.toArray(l),f=m.find(pn);if(f){const i=f.props.children,h=m.map(g=>g===f?a.Children.count(i)>1?a.Children.only(null):a.isValidElement(i)?i.props.children:null:g);return t.jsx(n,{...d,ref:s,children:a.isValidElement(i)?a.cloneElement(i,void 0,h):null})}return t.jsx(n,{...d,ref:s,children:l})});return r.displayName=`${e}.Slot`,r}function mn(e){const n=a.forwardRef((r,o)=>{const{children:s,...l}=r;if(a.isValidElement(s)){const d=hn(s),m=xn(l,s.props);return s.type!==a.Fragment&&(m.ref=o?Q(o,d):d),a.cloneElement(s,m)}return a.Children.count(s)>1?a.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}var fn=Symbol("radix.slottable");function pn(e){return a.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===fn}function xn(e,n){const r={...n};for(const o in n){const s=e[o],l=n[o];/^on[A-Z]/.test(o)?s&&l?r[o]=(...m)=>{const f=l(...m);return s(...m),f}:s&&(r[o]=s):o==="style"?r[o]={...s,...l}:o==="className"&&(r[o]=[s,l].filter(Boolean).join(" "))}return{...e,...r}}function hn(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=n&&"isReactWarning"in n&&n.isReactWarning;return r?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=n&&"isReactWarning"in n&&n.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var gn=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],W=gn.reduce((e,n)=>{const r=un(`Primitive.${n}`),o=a.forwardRef((s,l)=>{const{asChild:d,...m}=s,f=d?r:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(f,{...m,ref:l})});return o.displayName=`Primitive.${n}`,{...e,[n]:o}},{}),pe='[cmdk-group=""]',_e='[cmdk-group-items=""]',vn='[cmdk-group-heading=""]',yt='[cmdk-item=""]',Qe=`${yt}:not([aria-disabled="true"])`,Oe="cmdk-item-select",te="data-value",bn=(e,n,r)=>dn(e,n,r),jt=a.createContext(void 0),ge=()=>a.useContext(jt),wt=a.createContext(void 0),Fe=()=>a.useContext(wt),Ct=a.createContext(void 0),Nt=a.forwardRef((e,n)=>{let r=re(()=>{var u,v;return{search:"",value:(v=(u=e.value)!=null?u:e.defaultValue)!=null?v:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),o=re(()=>new Set),s=re(()=>new Map),l=re(()=>new Map),d=re(()=>new Set),m=St(e),{label:f,children:i,value:h,onValueChange:g,filter:x,shouldFilter:w,loop:k,disablePointerSelection:D=!1,vimBindings:R=!0,...$}=e,oe=q(),Z=q(),J=q(),A=a.useRef(null),N=Rn();X(()=>{if(h!==void 0){let u=h.trim();r.current.value=u,S.emit()}},[h]),X(()=>{N(6,ce)},[]);let S=a.useMemo(()=>({subscribe:u=>(d.current.add(u),()=>d.current.delete(u)),snapshot:()=>r.current,setState:(u,v,y)=>{var p,j,C,I;if(!Object.is(r.current[u],v)){if(r.current[u]=v,u==="search")V(),ie(),N(1,Y);else if(u==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let P=document.getElementById(J);P?P.focus():(p=document.getElementById(oe))==null||p.focus()}if(N(7,()=>{var P;r.current.selectedItemId=(P=O())==null?void 0:P.id,S.emit()}),y||N(5,ce),((j=m.current)==null?void 0:j.value)!==void 0){let P=v??"";(I=(C=m.current).onValueChange)==null||I.call(C,P);return}}S.emit()}},emit:()=>{d.current.forEach(u=>u())}}),[]),L=a.useMemo(()=>({value:(u,v,y)=>{var p;v!==((p=l.current.get(u))==null?void 0:p.value)&&(l.current.set(u,{value:v,keywords:y}),r.current.filtered.items.set(u,le(v,y)),N(2,()=>{ie(),S.emit()}))},item:(u,v)=>(o.current.add(u),v&&(s.current.has(v)?s.current.get(v).add(u):s.current.set(v,new Set([u]))),N(3,()=>{V(),ie(),r.current.value||Y(),S.emit()}),()=>{l.current.delete(u),o.current.delete(u),r.current.filtered.items.delete(u);let y=O();N(4,()=>{V(),y?.getAttribute("id")===u&&Y(),S.emit()})}),group:u=>(s.current.has(u)||s.current.set(u,new Set),()=>{l.current.delete(u),s.current.delete(u)}),filter:()=>m.current.shouldFilter,label:f||e["aria-label"],getDisablePointerSelection:()=>m.current.disablePointerSelection,listId:oe,inputId:J,labelId:Z,listInnerRef:A}),[]);function le(u,v){var y,p;let j=(p=(y=m.current)==null?void 0:y.filter)!=null?p:bn;return u?j(u,r.current.search,v):0}function ie(){if(!r.current.search||m.current.shouldFilter===!1)return;let u=r.current.filtered.items,v=[];r.current.filtered.groups.forEach(p=>{let j=s.current.get(p),C=0;j.forEach(I=>{let P=u.get(I);C=Math.max(P,C)}),v.push([p,C])});let y=A.current;z().sort((p,j)=>{var C,I;let P=p.getAttribute("id"),K=j.getAttribute("id");return((C=u.get(K))!=null?C:0)-((I=u.get(P))!=null?I:0)}).forEach(p=>{let j=p.closest(_e);j?j.appendChild(p.parentElement===j?p:p.closest(`${_e} > *`)):y.appendChild(p.parentElement===y?p:p.closest(`${_e} > *`))}),v.sort((p,j)=>j[1]-p[1]).forEach(p=>{var j;let C=(j=A.current)==null?void 0:j.querySelector(`${pe}[${te}="${encodeURIComponent(p[0])}"]`);C?.parentElement.appendChild(C)})}function Y(){let u=z().find(y=>y.getAttribute("aria-disabled")!=="true"),v=u?.getAttribute(te);S.setState("value",v||void 0)}function V(){var u,v,y,p;if(!r.current.search||m.current.shouldFilter===!1){r.current.filtered.count=o.current.size;return}r.current.filtered.groups=new Set;let j=0;for(let C of o.current){let I=(v=(u=l.current.get(C))==null?void 0:u.value)!=null?v:"",P=(p=(y=l.current.get(C))==null?void 0:y.keywords)!=null?p:[],K=le(I,P);r.current.filtered.items.set(C,K),K>0&&j++}for(let[C,I]of s.current)for(let P of I)if(r.current.filtered.items.get(P)>0){r.current.filtered.groups.add(C);break}r.current.filtered.count=j}function ce(){var u,v,y;let p=O();p&&(((u=p.parentElement)==null?void 0:u.firstChild)===p&&((y=(v=p.closest(pe))==null?void 0:v.querySelector(vn))==null||y.scrollIntoView({block:"nearest"})),p.scrollIntoView({block:"nearest"}))}function O(){var u;return(u=A.current)==null?void 0:u.querySelector(`${yt}[aria-selected="true"]`)}function z(){var u;return Array.from(((u=A.current)==null?void 0:u.querySelectorAll(Qe))||[])}function U(u){let v=z()[u];v&&S.setState("value",v.getAttribute(te))}function ee(u){var v;let y=O(),p=z(),j=p.findIndex(I=>I===y),C=p[j+u];(v=m.current)!=null&&v.loop&&(C=j+u<0?p[p.length-1]:j+u===p.length?p[0]:p[j+u]),C&&S.setState("value",C.getAttribute(te))}function de(u){let v=O(),y=v?.closest(pe),p;for(;y&&!p;)y=u>0?En(y,pe):In(y,pe),p=y?.querySelector(Qe);p?S.setState("value",p.getAttribute(te)):ee(u)}let ue=()=>U(z().length-1),me=u=>{u.preventDefault(),u.metaKey?ue():u.altKey?de(1):ee(1)},fe=u=>{u.preventDefault(),u.metaKey?U(0):u.altKey?de(-1):ee(-1)};return a.createElement(W.div,{ref:n,tabIndex:-1,...$,"cmdk-root":"",onKeyDown:u=>{var v;(v=$.onKeyDown)==null||v.call($,u);let y=u.nativeEvent.isComposing||u.keyCode===229;if(!(u.defaultPrevented||y))switch(u.key){case"n":case"j":{R&&u.ctrlKey&&me(u);break}case"ArrowDown":{me(u);break}case"p":case"k":{R&&u.ctrlKey&&fe(u);break}case"ArrowUp":{fe(u);break}case"Home":{u.preventDefault(),U(0);break}case"End":{u.preventDefault(),ue();break}case"Enter":{u.preventDefault();let p=O();if(p){let j=new Event(Oe);p.dispatchEvent(j)}}}}},a.createElement("label",{"cmdk-label":"",htmlFor:L.inputId,id:L.labelId,style:_n},f),je(e,u=>a.createElement(wt.Provider,{value:S},a.createElement(jt.Provider,{value:L},u))))}),yn=a.forwardRef((e,n)=>{var r,o;let s=q(),l=a.useRef(null),d=a.useContext(Ct),m=ge(),f=St(e),i=(o=(r=f.current)==null?void 0:r.forceMount)!=null?o:d?.forceMount;X(()=>{if(!i)return m.item(s,d?.id)},[i]);let h=Pt(s,l,[e.value,e.children,l],e.keywords),g=Fe(),x=B(N=>N.value&&N.value===h.current),w=B(N=>i||m.filter()===!1?!0:N.search?N.filtered.items.get(s)>0:!0);a.useEffect(()=>{let N=l.current;if(!(!N||e.disabled))return N.addEventListener(Oe,k),()=>N.removeEventListener(Oe,k)},[w,e.onSelect,e.disabled]);function k(){var N,S;D(),(S=(N=f.current).onSelect)==null||S.call(N,h.current)}function D(){g.setState("value",h.current,!0)}if(!w)return null;let{disabled:R,value:$,onSelect:oe,forceMount:Z,keywords:J,...A}=e;return a.createElement(W.div,{ref:Q(l,n),...A,id:s,"cmdk-item":"",role:"option","aria-disabled":!!R,"aria-selected":!!x,"data-disabled":!!R,"data-selected":!!x,onPointerMove:R||m.getDisablePointerSelection()?void 0:D,onClick:R?void 0:k},e.children)}),jn=a.forwardRef((e,n)=>{let{heading:r,children:o,forceMount:s,...l}=e,d=q(),m=a.useRef(null),f=a.useRef(null),i=q(),h=ge(),g=B(w=>s||h.filter()===!1?!0:w.search?w.filtered.groups.has(d):!0);X(()=>h.group(d),[]),Pt(d,m,[e.value,e.heading,f]);let x=a.useMemo(()=>({id:d,forceMount:s}),[s]);return a.createElement(W.div,{ref:Q(m,n),...l,"cmdk-group":"",role:"presentation",hidden:g?void 0:!0},r&&a.createElement("div",{ref:f,"cmdk-group-heading":"","aria-hidden":!0,id:i},r),je(e,w=>a.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?i:void 0},a.createElement(Ct.Provider,{value:x},w))))}),wn=a.forwardRef((e,n)=>{let{alwaysRender:r,...o}=e,s=a.useRef(null),l=B(d=>!d.search);return!r&&!l?null:a.createElement(W.div,{ref:Q(s,n),...o,"cmdk-separator":"",role:"separator"})}),Cn=a.forwardRef((e,n)=>{let{onValueChange:r,...o}=e,s=e.value!=null,l=Fe(),d=B(i=>i.search),m=B(i=>i.selectedItemId),f=ge();return a.useEffect(()=>{e.value!=null&&l.setState("search",e.value)},[e.value]),a.createElement(W.input,{ref:n,...o,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":f.listId,"aria-labelledby":f.labelId,"aria-activedescendant":m,id:f.inputId,type:"text",value:s?e.value:d,onChange:i=>{s||l.setState("search",i.target.value),r?.(i.target.value)}})}),Nn=a.forwardRef((e,n)=>{let{children:r,label:o="Suggestions",...s}=e,l=a.useRef(null),d=a.useRef(null),m=B(i=>i.selectedItemId),f=ge();return a.useEffect(()=>{if(d.current&&l.current){let i=d.current,h=l.current,g,x=new ResizeObserver(()=>{g=requestAnimationFrame(()=>{let w=i.offsetHeight;h.style.setProperty("--cmdk-list-height",w.toFixed(1)+"px")})});return x.observe(i),()=>{cancelAnimationFrame(g),x.unobserve(i)}}},[]),a.createElement(W.div,{ref:Q(l,n),...s,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":m,"aria-label":o,id:f.listId},je(e,i=>a.createElement("div",{ref:Q(d,f.listInnerRef),"cmdk-list-sizer":""},i)))}),Sn=a.forwardRef((e,n)=>{let{open:r,onOpenChange:o,overlayClassName:s,contentClassName:l,container:d,...m}=e;return a.createElement(ur,{open:r,onOpenChange:o},a.createElement(mr,{container:d},a.createElement(fr,{"cmdk-overlay":"",className:s}),a.createElement(pr,{"aria-label":e.label,"cmdk-dialog":"",className:l},a.createElement(Nt,{ref:n,...m}))))}),Pn=a.forwardRef((e,n)=>B(r=>r.filtered.count===0)?a.createElement(W.div,{ref:n,...e,"cmdk-empty":"",role:"presentation"}):null),kn=a.forwardRef((e,n)=>{let{progress:r,children:o,label:s="Loading...",...l}=e;return a.createElement(W.div,{ref:n,...l,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":s},je(e,d=>a.createElement("div",{"aria-hidden":!0},d)))}),se=Object.assign(Nt,{List:Nn,Item:yn,Input:Cn,Group:jn,Separator:wn,Dialog:Sn,Empty:Pn,Loading:kn});function En(e,n){let r=e.nextElementSibling;for(;r;){if(r.matches(n))return r;r=r.nextElementSibling}}function In(e,n){let r=e.previousElementSibling;for(;r;){if(r.matches(n))return r;r=r.previousElementSibling}}function St(e){let n=a.useRef(e);return X(()=>{n.current=e}),n}var X=typeof window>"u"?a.useEffect:a.useLayoutEffect;function re(e){let n=a.useRef();return n.current===void 0&&(n.current=e()),n}function B(e){let n=Fe(),r=()=>e(n.snapshot());return a.useSyncExternalStore(n.subscribe,r,r)}function Pt(e,n,r,o=[]){let s=a.useRef(),l=ge();return X(()=>{var d;let m=(()=>{var i;for(let h of r){if(typeof h=="string")return h.trim();if(typeof h=="object"&&"current"in h)return h.current?(i=h.current.textContent)==null?void 0:i.trim():s.current}})(),f=o.map(i=>i.trim());l.value(e,m,f),(d=n.current)==null||d.setAttribute(te,m),s.current=m}),s}var Rn=()=>{let[e,n]=a.useState(),r=re(()=>new Map);return X(()=>{r.current.forEach(o=>o()),r.current=new Map},[e]),(o,s)=>{r.current.set(o,s),n({})}};function Mn(e){let n=e.type;return typeof n=="function"?n(e.props):"render"in n?n.render(e.props):e}function je({asChild:e,children:n},r){return e&&a.isValidElement(n)?a.cloneElement(Mn(n),{ref:n.ref},r(n.props.children)):r(n)}var _n={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function Xe({className:e,...n}){return t.jsx(se,{"data-slot":"command",className:ae("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),...n})}function Ze({className:e,...n}){return t.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[t.jsx(xr,{className:"size-4 shrink-0 opacity-50"}),t.jsx(se.Input,{"data-slot":"command-input",className:ae("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",e),...n})]})}function Je({className:e,...n}){return t.jsx(se.List,{"data-slot":"command-list",className:ae("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",e),...n})}function Ye({...e}){return t.jsx(se.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...e})}function et({className:e,...n}){return t.jsx(se.Group,{"data-slot":"command-group",className:ae("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e),...n})}function tt({className:e,...n}){return t.jsx(se.Item,{"data-slot":"command-item",className:ae("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...n})}function Dn({open:e,onOpenChange:n,currentContact:r,duplicates:o,onMerge:s}){const[l,d]=a.useState(!1),[m,f]=a.useState(null),i=async()=>{if(m){d(!0);try{await s(r._id,m.contact._id),n(!1),f(null)}catch(x){console.error("Merge failed:",x),alert("Failed to merge contacts: "+(x instanceof Error?x.message:"Unknown error"))}finally{d(!1)}}},h=x=>[x.firstName,x.lastName].filter(Boolean).join(" ")||"Unknown",g={high:"bg-red-100 text-red-800 border-red-300",medium:"bg-yellow-100 text-yellow-800 border-yellow-300",low:"bg-gray-100 text-gray-800 border-gray-300"};return t.jsx(yr,{open:e,onOpenChange:n,children:t.jsxs(jr,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[t.jsxs(wr,{children:[t.jsxs(Cr,{className:"flex items-center gap-2",children:[t.jsx(ot,{className:"w-5 h-5 text-orange-500"}),"Potential Duplicate Contacts Found"]}),t.jsxs(Nr,{children:["The following contacts might be duplicates of"," ",t.jsx("strong",{children:h(r)}),". Select a duplicate to merge it with the current contact."]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-4 bg-blue-50 border-2 border-blue-500 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.imageUrl?t.jsx("img",{src:r.imageUrl,alt:h(r),className:"w-12 h-12 rounded-full object-cover"}):t.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500 flex items-center justify-center text-white font-semibold",children:h(r).charAt(0)}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-lg",children:h(r)}),t.jsx(be,{variant:"outline",className:"text-xs",children:"Current Contact (Keep)"})]})]}),t.jsxs("div",{className:"text-sm space-y-1 text-gray-700",children:[r.instagram&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ze,{className:"w-3 h-3"}),"@",r.instagram]}),r.whatsapp&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Be,{className:"w-3 h-3"}),r.whatsapp]}),r.dexId&&t.jsxs("div",{className:"text-xs text-gray-500",children:["Dex ID: ",r.dexId]})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("h4",{className:"font-medium text-sm text-gray-700",children:"Select duplicate to merge:"}),o.map(x=>t.jsxs("button",{onClick:()=>f(x),className:`w-full text-left p-4 rounded-lg border-2 transition-all ${m?.contactId===x.contactId?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 bg-white"}`,children:[t.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[t.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[x.contact.imageUrl?t.jsx("img",{src:x.contact.imageUrl,alt:h(x.contact),className:"w-10 h-10 rounded-full object-cover"}):t.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-400 flex items-center justify-center text-white font-semibold text-sm",children:h(x.contact).charAt(0)}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-medium",children:h(x.contact)}),t.jsx("p",{className:"text-xs text-gray-600",children:x.matchReason})]})]}),t.jsxs(be,{className:`text-xs ${g[x.confidence]}`,children:[x.confidence," confidence"]})]}),t.jsxs("div",{className:"text-sm space-y-1 text-gray-700 ml-13",children:[x.contact.instagram&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ze,{className:"w-3 h-3"}),"@",x.contact.instagram]}),x.contact.whatsapp&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Be,{className:"w-3 h-3"}),x.contact.whatsapp]}),x.contact.dexId&&t.jsxs("div",{className:"text-xs text-gray-500",children:["Dex ID: ",x.contact.dexId]})]})]},x.contactId))]})]}),t.jsxs(Sr,{children:[t.jsx(_,{variant:"outline",onClick:()=>n(!1),disabled:l,children:"Cancel"}),t.jsx(_,{onClick:i,disabled:!m||l,children:l?"Merging...":"Merge Selected Contact"})]})]})})}const On="2010",An=[{value:"Professional",emoji:"ðŸ’¼",label:"Professional"},{value:"Friend",emoji:"ðŸ‘¥",label:"Friend"},{value:"Good friend",emoji:"ðŸ¤",label:"Good friend"},{value:"Romantic",emoji:"ðŸ’",label:"Romantic"},{value:"Party",emoji:"ðŸŽ‰",label:"Party"},{value:"Other",emoji:"âš™ï¸",label:"Other"}],Tn=[{value:"Female",emoji:"ðŸ‘§",label:"Female"},{value:"Male",emoji:"ðŸ‘¦",label:"Male"}],Fn=[{value:"Talking",label:"Talking"},{value:"Planning",label:"Planning"},{value:"Dated",label:"Dated"},{value:"Connected",label:"Connected"},{value:"Former",label:"Former"}];function ra({contact:e,isLoading:n,searchedUsername:r,searchedPhoneNumber:o}){const[s,l]=a.useState(e?.notes||""),[d,m]=a.useState(e?.objective||""),[f,i]=a.useState(!1),[h,g]=a.useState(!1),[x,w]=a.useState(""),[k,D]=a.useState(!1),[R,$]=a.useState(!1),[oe,Z]=a.useState(!1),[J,A]=a.useState(e?._id),[N,S]=a.useState(!1),[L,le]=a.useState(""),[ie,Y]=a.useState(!1),[V,ce]=a.useState(""),[O,z]=a.useState(e?.privateNotes||""),[U,ee]=a.useState(e?.intimateConnection||!1),[de,ue]=a.useState(e?.intimateConnectionDate||""),[me,fe]=a.useState(e?.leadStatus),[u,v]=a.useState(!1),y=M(E.contactMutations.toggleConnectionType),p=M(E.contactMutations.toggleSex),j=M(E.contactMutations.updateContactNotes),C=M(E.contactMutations.updateContactObjective),I=M(E.contactMutations.updatePrivateNotes),P=M(E.contactMutations.toggleLocation),K=M(E.contactMutations.updateIntimateConnection),kt=M(E.contactMutations.updateLeadStatus),Et=M(E.contactMutations.createContact),It=M(E.locationMutations.createLocation),Rt=M(E.tagMutations.createTag),Mt=M(E.tagMutations.toggleTag),_t=M(E.contactMerge.mergeContacts),$e=ke(E.locationQueries.listLocations),Le=ke(E.tagQueries.listTags),T=ke(E.contactDuplicates.findDuplicates,e?._id?{contactId:e._id}:"skip");a.useEffect(()=>{e?._id!==J&&(A(e?._id),$(!1),g(!1),Z(!1),w(""),D(!1))},[e?._id,J]),a.useEffect(()=>{if(!R)return;const c=setTimeout(()=>{$(!1)},120*1e3);return()=>clearTimeout(c)},[R]),a.useEffect(()=>{if(!h)return;const c=setTimeout(()=>{g(!1),w("")},120*1e3);return()=>clearTimeout(c)},[h]),a.useEffect(()=>{l(e?.notes||""),m(e?.objective||""),z(e?.privateNotes||""),ee(e?.intimateConnection||!1),ue(e?.intimateConnectionDate||""),fe(e?.leadStatus)},[e]);const Dt=async c=>{if(e){i(!0);try{await y({contactId:e._id,connectionType:c})}catch(b){console.error("Failed to toggle connection:",b)}finally{i(!1)}}},Ot=async c=>{if(e){i(!0);try{await p({contactId:e._id,sexType:c})}catch(b){console.error("Failed to toggle sex:",b)}finally{i(!1)}}},At=async()=>{if(e){i(!0);try{await j({contactId:e._id,notes:s})}catch(c){console.error("Failed to update notes:",c)}finally{i(!1)}}},Tt=async()=>{if(e){i(!0);try{await C({contactId:e._id,objective:d})}catch(c){console.error("Failed to update objective:",c)}finally{i(!1)}}},Ft=async()=>{if(e){i(!0);try{await I({contactId:e._id,privateNotes:O})}catch(c){console.error("Failed to update private notes:",c)}finally{i(!1)}}},we=async c=>{if(e){i(!0);try{await P({contactId:e._id,locationId:c})}catch(b){console.error("Failed to toggle location:",b)}finally{i(!1)}}},Ce=async c=>{if(e){i(!0);try{await Mt({contactId:e._id,tagId:c})}catch(b){console.error("Failed to toggle tag:",b)}finally{i(!1)}}},$t=async c=>{if(e){ee(c),i(!0);try{await K({contactId:e._id,intimateConnection:c,intimateConnectionDate:c?de:void 0})}catch(b){console.error("Failed to update intimate connection:",b)}finally{i(!1)}}},Lt=async c=>{if(e){ue(c),i(!0);try{await K({contactId:e._id,intimateConnection:U,intimateConnectionDate:c})}catch(b){console.error("Failed to update intimate connection date:",b)}finally{i(!1)}}},Vt=async c=>{if(!e)return;const b=me===c?null:c;fe(b??void 0),i(!0);try{await kt({contactId:e._id,leadStatus:b})}catch(F){console.error("Failed to update lead status:",F)}finally{i(!1)}},zt=async c=>{if(c.trim()){i(!0);try{const b=await It({name:c.trim()});await we(b),le("")}catch(b){console.error("Failed to create location:",b)}finally{i(!1)}}},Bt=async c=>{if(c.trim()){i(!0);try{const{tagId:b}=await Rt({name:c.trim()});await Ce(b),ce("")}catch(b){console.error("Failed to create tag:",b)}finally{i(!1)}}},Ht=async c=>{await Ce(c)},Wt=c=>{we(c)},Ut=c=>{c===On?(D(!1),g(!0)):(D(!0),setTimeout(()=>{w(""),D(!1)},1e3))},Kt=async()=>{if(!(!r&&!o)){i(!0);try{await Et({instagram:r,whatsapp:o,phoneNumber:o})}catch(c){console.error("Failed to create contact:",c)}finally{i(!1)}}};if(!e&&!n)return t.jsx("div",{className:"h-full flex items-center justify-center px-6 py-8 border-b border-gray-200 bg-gray-50",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Pr,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),t.jsx("p",{className:"text-sm text-gray-500",children:"No contact matched"}),r||o?t.jsxs("div",{className:"mt-4 space-y-3",children:[t.jsxs("div",{className:"text-xs text-gray-600 bg-gray-100 px-3 py-2 rounded-lg inline-block",children:[t.jsx("p",{className:"font-medium mb-1",children:"Searched for:"}),r&&t.jsxs("div",{className:"mb-1",children:[t.jsx("span",{className:"text-gray-500",children:"Instagram: "}),t.jsxs("code",{className:"text-blue-600",children:["@",r]})]}),o&&t.jsxs("div",{className:"mb-1",children:[t.jsx("span",{className:"text-gray-500",children:"Phone: "}),t.jsx("code",{className:"text-green-600",children:o})]}),t.jsx("p",{className:"mt-1 text-gray-500",children:"Not found in contacts"})]}),t.jsx(_,{onClick:Kt,disabled:f,className:"w-full max-w-xs",children:f?"Creating...":"Create Contact"}),t.jsx("p",{className:"text-xs text-gray-400 mt-2",children:o&&!r?"Create contact for iMessage. Won't sync to Dex.":"Create now, sync later. When Dex syncs, matching contacts will be linked automatically."})]}):t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Select a chat to view contact details"})]})});if(n||!e)return t.jsx("div",{className:"h-full flex items-center justify-center px-6 py-8 border-b border-gray-200",children:t.jsx("div",{className:"text-sm text-gray-500",children:"Loading contact..."})});const Ne=[e.firstName,e.lastName].filter(Boolean).join(" ")||"Unknown",Gt=Ne.split(" ").map(c=>c[0]).join("").toUpperCase().slice(0,2),qt=e.connections||[],Qt=e.sex||[],Se=e.tagIds||[],Pe=e.locationIds||[];return t.jsxs("div",{className:"h-full flex flex-col border-b border-gray-200 bg-white overflow-y-auto",onMouseEnter:()=>$(!0),children:[t.jsxs("div",{className:"flex-shrink-0 px-6 py-4 border-b border-gray-200 space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[e.imageUrl?t.jsx("img",{src:e.imageUrl,alt:Ne,className:"w-12 h-12 rounded-full object-cover"}):t.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white font-semibold",children:Gt}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:Ne}),e.instagram&&t.jsxs("p",{className:"text-sm text-gray-500",children:["@",e.instagram]})]}),t.jsxs(hr,{children:[t.jsx(gr,{asChild:!0,children:t.jsx(_,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:t.jsx(Er,{className:"h-4 w-4"})})}),t.jsx(vr,{align:"end",children:t.jsxs(br,{onClick:()=>v(!0),children:[t.jsx(_r,{className:"h-4 w-4 mr-2"}),"Merge with another contact"]})})]})]}),T&&T.length>0&&t.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(ot,{className:"w-4 h-4 text-orange-600 flex-shrink-0 mt-0.5"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("p",{className:"text-xs font-medium text-orange-800",children:[T.length," potential duplicate",T.length>1?"s":""," found"]}),t.jsxs("p",{className:"text-xs text-orange-600 mt-1",children:["This contact may be the same as ",T.length," other",T.length>1?"s":""," in your database"]})]})]}),t.jsx(_,{variant:"outline",size:"sm",onClick:()=>v(!0),className:"w-full mt-2 text-xs border-orange-300 hover:bg-orange-100",children:"Review & Merge Duplicates"})]}),t.jsx("div",{children:t.jsxs(We,{open:ie,onOpenChange:Y,children:[t.jsx(Ue,{asChild:!0,children:t.jsx(_,{variant:"outline",className:"w-full justify-start h-auto min-h-[40px] p-2",disabled:f,children:t.jsx("div",{className:"flex flex-wrap gap-1",children:Se.length>0?Se.map(c=>{const b=Le?.find(F=>F._id===c);return b?t.jsxs(be,{variant:"secondary",className:"gap-1",children:[b.name,t.jsx(Ve,{className:"w-3 h-3 cursor-pointer hover:text-destructive",onClick:F=>{F.stopPropagation(),Ht(c)}})]},c):null}):t.jsx("span",{className:"text-muted-foreground text-sm",children:"Select tags..."})})})}),t.jsx(Ke,{className:"w-full p-0 bg-white",align:"start",children:t.jsxs(Xe,{children:[t.jsx(Ze,{placeholder:"Search or create tag...",value:V,onValueChange:ce}),t.jsxs(Je,{children:[t.jsx(Ye,{children:t.jsxs(_,{variant:"ghost",className:"w-full justify-start text-sm",onClick:()=>{Bt(V),Y(!1)},disabled:!V.trim(),children:['Create "',V,'"']})}),t.jsx(et,{children:Le?.map(c=>{const b=Se.includes(c._id);return t.jsxs(tt,{onSelect:()=>{Ce(c._id)},className:"cursor-pointer",children:[t.jsx("span",{className:"flex-1",children:c.name}),b&&t.jsx(He,{className:"w-4 h-4 text-blue-600"})]},c._id)})})]})]})})]})}),t.jsx("div",{children:t.jsxs(We,{open:N,onOpenChange:S,children:[t.jsx(Ue,{asChild:!0,children:t.jsx(_,{variant:"outline",className:"w-full justify-start h-auto min-h-[40px] p-2",disabled:f,children:t.jsx("div",{className:"flex flex-wrap gap-1",children:Pe.length>0?Pe.map(c=>{const b=$e?.find(F=>F._id===c);return b?t.jsxs(be,{variant:"secondary",className:"gap-1",children:[b.name,t.jsx(Ve,{className:"w-3 h-3 cursor-pointer hover:text-destructive",onClick:F=>{F.stopPropagation(),Wt(c)}})]},c):null}):t.jsx("span",{className:"text-muted-foreground text-sm",children:"Select locations..."})})})}),t.jsx(Ke,{className:"w-full p-0 bg-white",align:"start",children:t.jsxs(Xe,{children:[t.jsx(Ze,{placeholder:"Search or create location...",value:L,onValueChange:le}),t.jsxs(Je,{children:[t.jsx(Ye,{children:t.jsxs(_,{variant:"ghost",className:"w-full justify-start text-sm",onClick:()=>{zt(L),S(!1)},disabled:!L.trim(),children:['Create "',L,'"']})}),t.jsx(et,{children:$e?.map(c=>{const b=Pe.includes(c._id);return t.jsxs(tt,{onSelect:()=>{we(c._id)},className:"cursor-pointer",children:[t.jsx("span",{className:"flex-1",children:c.name}),b&&t.jsx(He,{className:"w-4 h-4 text-blue-600"})]},c._id)})})]})]})})]})}),t.jsxs("div",{children:[t.jsx(Ee,{id:"contact-notes",value:s,onChange:c=>l(c.target.value),placeholder:"Add notes about this contact...",className:"min-h-[120px] text-sm",disabled:f}),s!==(e.notes||"")&&t.jsxs(_,{onClick:At,disabled:f,size:"sm",className:"mt-2 w-full",children:[t.jsx(Ie,{className:"w-4 h-4 mr-2"}),f?"Saving...":"Save Notes"]})]}),t.jsxs("div",{className:`transition-opacity duration-200 space-y-4 ${R?"opacity-100":"opacity-0 pointer-events-none"}`,children:[t.jsx("div",{className:"flex flex-wrap gap-2",children:An.map(c=>{const b=qt.includes(c.value);return t.jsx("button",{onClick:()=>Dt(c.value),disabled:f,title:c.label,className:`px-3 py-2 text-lg rounded-lg transition-all border-2 ${b?"bg-blue-100 border-blue-500 scale-110":"bg-white border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,style:{filter:"grayscale(100%)"},children:c.emoji},c.value)})}),t.jsxs("div",{children:[t.jsx(G,{htmlFor:"objective",className:"text-xs text-gray-600 mb-1 block",children:"Objective"}),t.jsx(Ee,{id:"objective",value:d,onChange:c=>m(c.target.value),placeholder:"",className:"min-h-[60px] text-sm",disabled:f}),d!==(e.objective||"")&&t.jsxs(_,{onClick:Tt,disabled:f,size:"sm",className:"mt-2 w-full",children:[t.jsx(Ie,{className:"w-4 h-4 mr-2"}),f?"Saving...":"Save Objective"]})]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:Tn.map(c=>{const b=Qt.includes(c.value);return t.jsx("button",{onClick:()=>Ot(c.value),disabled:f,title:c.label,className:`px-3 py-2 text-lg rounded-lg transition-all border-2 ${b?"bg-blue-100 border-blue-500 scale-110":"bg-white border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,style:{filter:"grayscale(100%)"},children:c.emoji},c.value)})}),t.jsxs("div",{children:[t.jsx(G,{className:"text-xs text-gray-600 mb-2 block",children:"Lead Status"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:Fn.map(c=>{const b=me===c.value;return t.jsx("button",{onClick:()=>Vt(c.value),disabled:f,className:`px-3 py-2 text-sm font-medium rounded-lg transition-all border-2 ${b?"bg-blue-100 border-blue-500":"bg-white border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:c.label},c.value)})})]}),e.description&&t.jsxs("div",{children:[t.jsx(G,{className:"text-xs text-gray-600 mb-1 block",children:"Description (from Dex)"}),t.jsx("p",{className:"text-sm text-gray-800 bg-gray-50 p-3 rounded-lg border border-gray-200",children:e.description})]}),t.jsx("div",{className:"border-t-2 border-gray-200 pt-4",children:h?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600 bg-green-50 px-3 py-2 rounded-lg border border-green-200",children:[t.jsx(Rr,{className:"w-4 h-4"}),t.jsx("span",{children:"Private fields unlocked"})]}),t.jsxs("div",{children:[t.jsx(G,{htmlFor:"private-notes",className:"text-xs text-gray-600 mb-1 block",children:"Private Notes"}),t.jsx(Ee,{id:"private-notes",value:O,onChange:c=>z(c.target.value),placeholder:"Add private notes...",className:"min-h-[80px] text-sm",disabled:f}),O!==(e.privateNotes||"")&&t.jsxs(_,{onClick:Ft,disabled:f,size:"sm",className:"mt-2 w-full",children:[t.jsx(Ie,{className:"w-4 h-4 mr-2"}),f?"Saving...":"Save Private Notes"]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(G,{htmlFor:"intimate-connection",className:"text-xs text-gray-600",children:"Intimate Connection"}),t.jsx(Yt,{id:"intimate-connection",checked:U,onCheckedChange:$t,disabled:f})]}),U&&t.jsxs("div",{children:[t.jsx(G,{htmlFor:"intimate-connection-date",className:"text-xs text-gray-600 mb-1 block",children:"Date"}),t.jsx(er,{id:"intimate-connection-date",type:"date",value:de,onChange:c=>Lt(c.target.value),disabled:f,className:"text-sm"})]})]})]}):t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 cursor-pointer",onMouseEnter:()=>Z(!0),onMouseLeave:()=>Z(!1),children:[t.jsx(Xt,{className:"w-4 h-4"}),t.jsx(G,{className:"text-xs text-gray-600 cursor-pointer",children:"More"})]}),oe&&t.jsxs("div",{className:"flex flex-col items-center gap-3",children:[t.jsx(Zt,{maxLength:4,value:x,onChange:c=>{w(c),D(!1),c.length===4&&Ut(c)},autoFocus:!0,children:t.jsxs(Jt,{children:[t.jsx(ve,{index:0}),t.jsx(ve,{index:1}),t.jsx(ve,{index:2}),t.jsx(ve,{index:3})]})}),k&&t.jsx("p",{className:"text-xs text-red-600",children:"Incorrect PIN. Try again."})]})]})})]})]}),T&&T.length>0&&t.jsx(Dn,{open:u,onOpenChange:v,currentContact:e,duplicates:T,onMerge:async(c,b)=>{await _t({primaryId:c,duplicateId:b})}})]})}export{ra as C,Er as E};
