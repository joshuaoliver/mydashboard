import{e as z,c as B,d as h,r as i,j as e,C as w,f as S,h as p,i as K,k as Q,l as q}from"./index-BiTP6UeF.js";import{u as R}from"./useSuspenseQuery-BI5dw9cZ.js";import{B as m}from"./button-RNOw0Kg4.js";import{I as d}from"./input-C8zM_rjF.js";import{L as n}from"./label-BUooFWRZ.js";import{S as T}from"./switch-BrP0SaIw.js";import{D as C,a as U,b as V,c as Z,d as $,e as G,f as J}from"./dialog-CkvU02Kn.js";import{P as k}from"./plus-Duac9OgE.js";import{C as D}from"./clock-GT_BKR4R.js";import{L}from"./layout-list-C8JU_Wy5.js";import{P as X}from"./pencil-H-izHkUJ.js";import{T as Y}from"./trash-2-Cg89AqxP.js";import"./index-eoGaCaxS.js";import"./Combination-DgyOTBSr.js";import"./index-DoJWmL-y.js";import"./index-DDYpCHIR.js";const ee=[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]],F=z("folder-kanban",ee);function fe(){const{data:a}=R(B(h.projectsStore.listProjects,{})),[l,o]=i.useState(!1),[r,c]=i.useState(null);return e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Projects"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage projects that link Hubstaff time tracking with Linear issues"})]}),e.jsxs(C,{open:l,onOpenChange:o,children:[e.jsx(U,{asChild:!0,children:e.jsxs(m,{children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"New Project"]})}),e.jsx(I,{onClose:()=>o(!1),isOpen:l})]})]}),a.length===0?e.jsx(w,{children:e.jsxs(S,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(F,{className:"w-12 h-12 text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"No projects yet"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Create a project to link Hubstaff and Linear data"}),e.jsxs(m,{onClick:()=>o(!0),children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Create Project"]})]})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:a.map(t=>e.jsx(ae,{project:t,onEdit:()=>c(t)},t._id))}),e.jsx(C,{open:r!==null,onOpenChange:t=>!t&&c(null),children:r&&e.jsx(I,{project:r,onClose:()=>c(null),isOpen:!0})})]})}function ae({project:a,onEdit:l}){const o=p(h.projectsStore.deleteProject),r=p(h.projectsStore.toggleProjectActive),c=()=>{confirm(`Delete project "${a.name}"?`)&&o({id:a._id}).catch(x=>alert(x.message||"Failed to delete"))},t=()=>{r({id:a._id}).catch(x=>alert(x.message||"Failed to toggle"))};return e.jsxs(w,{className:a.isActive?"":"opacity-60",children:[e.jsxs(K,{className:"flex flex-row items-start justify-between space-y-0 pb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5 text-blue-600"}),e.jsx(Q,{className:"text-lg font-semibold",children:a.name})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(m,{variant:"ghost",size:"sm",onClick:l,className:"h-8 w-8 p-0 text-gray-600 hover:text-gray-900",children:e.jsx(X,{className:"w-4 h-4"})}),e.jsx(m,{variant:"ghost",size:"sm",onClick:c,className:"h-8 w-8 p-0 text-red-600 hover:text-red-700",children:e.jsx(Y,{className:"w-4 h-4"})})]})]}),e.jsxs(S,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(D,{className:"w-4 h-4 text-green-600"}),a.hubstaffProjectName?e.jsx("span",{className:"text-gray-700",children:a.hubstaffProjectName}):e.jsx("span",{className:"text-gray-400 italic",children:"No Hubstaff project"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(L,{className:"w-4 h-4 text-purple-600"}),a.linearTeamName?e.jsx("span",{className:"text-gray-700",children:a.linearTeamName}):e.jsx("span",{className:"text-gray-400 italic",children:"No Linear team"})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Active"}),e.jsx(T,{checked:a.isActive,onCheckedChange:t})]}),e.jsxs(q,{className:"text-xs text-gray-500",children:["Created ",new Date(a.createdAt).toLocaleDateString()]})]})]})}function I({project:a,onClose:l,isOpen:o}){const[r,c]=i.useState(a?.name??""),[t,x]=i.useState(a?.hubstaffProjectId?.toString()??""),[u,A]=i.useState(a?.hubstaffProjectName??""),[g,H]=i.useState(a?.linearTeamId??""),[f,E]=i.useState(a?.linearTeamName??""),[N,W]=i.useState(a?.linearWorkspaceId??""),[v,M]=i.useState(a?.isActive??!0),[y,b]=i.useState(!1),O=p(h.projectsStore.createProject),_=p(h.projectsStore.updateProject),j=!!a,P=async()=>{if(!r.trim()){alert("Please enter a project name");return}b(!0);try{j?await _({id:a._id,name:r.trim(),hubstaffProjectId:t?parseInt(t):null,hubstaffProjectName:u.trim()||null,linearWorkspaceId:N.trim()||null,linearTeamId:g.trim()||null,linearTeamName:f.trim()||null,isActive:v}):await O({name:r.trim(),hubstaffProjectId:t?parseInt(t):void 0,hubstaffProjectName:u.trim()||void 0,linearWorkspaceId:N.trim()||void 0,linearTeamId:g.trim()||void 0,linearTeamName:f.trim()||void 0,isActive:v}),l()}catch(s){alert(s.message||"Failed to save project")}finally{b(!1)}};return e.jsxs(V,{className:"sm:max-w-[500px]",children:[e.jsxs(Z,{children:[e.jsx($,{children:j?"Edit Project":"Create Project"}),e.jsx(G,{children:j?"Update project settings and integrations":"Create a new project to link Hubstaff and Linear"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"name",children:"Project Name *"}),e.jsx(d,{id:"name",placeholder:"My Project",value:r,onChange:s=>c(s.target.value),onKeyDown:s=>s.key==="Enter"&&P()})]}),e.jsxs("div",{className:"space-y-3 p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"font-medium text-green-800",children:"Hubstaff"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(n,{htmlFor:"hubstaffId",className:"text-xs",children:"Project ID"}),e.jsx(d,{id:"hubstaffId",placeholder:"12345",value:t,onChange:s=>x(s.target.value),type:"number"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(n,{htmlFor:"hubstaffName",className:"text-xs",children:"Project Name"}),e.jsx(d,{id:"hubstaffName",placeholder:"Hubstaff project name",value:u,onChange:s=>A(s.target.value)})]})]})]}),e.jsxs("div",{className:"space-y-3 p-3 bg-purple-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"font-medium text-purple-800",children:"Linear"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(n,{htmlFor:"linearWorkspace",className:"text-xs",children:"Workspace ID"}),e.jsx(d,{id:"linearWorkspace",placeholder:"workspace-slug",value:N,onChange:s=>W(s.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(n,{htmlFor:"linearTeamId",className:"text-xs",children:"Team ID"}),e.jsx(d,{id:"linearTeamId",placeholder:"team-id",value:g,onChange:s=>H(s.target.value)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(n,{htmlFor:"linearTeamName",className:"text-xs",children:"Team Name"}),e.jsx(d,{id:"linearTeamName",placeholder:"Engineering",value:f,onChange:s=>E(s.target.value)})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{htmlFor:"active",children:"Active"}),e.jsx(T,{id:"active",checked:v,onCheckedChange:M})]})]}),e.jsxs(J,{children:[e.jsx(m,{variant:"outline",onClick:l,disabled:y,children:"Cancel"}),e.jsx(m,{onClick:P,disabled:y,children:y?"Saving...":j?"Save Changes":"Create Project"})]})]})}export{fe as component};
